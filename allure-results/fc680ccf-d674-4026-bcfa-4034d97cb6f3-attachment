# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: GET Books by ID >> has all fields matching existing book
- Location: C:\Users\dimitar.stoev\Desktop\interview framework\AllWynPlaywright\project-root\tests\get-books.spec.ts:67:9

# Error details

```
Error: expect(received).toBe(expected) // Object.is equality

- Expected  - 1
+ Received  + 6

- Excerpt 11
+ Lorem lorem lorem. Lorem lorem lorem. Lorem lorem lorem.
+ Lorem lorem lorem. Lorem lorem lorem. Lorem lorem lorem.
+ Lorem lorem lorem. Lorem lorem lorem. Lorem lorem lorem.
+ Lorem lorem lorem. Lorem lorem lorem. Lorem lorem lorem.
+ Lorem lorem lorem. Lorem lorem lorem. Lorem lorem lorem.
+
    at C:\Users\dimitar.stoev\Desktop\interview framework\AllWynPlaywright\project-root\tests\get-books.spec.ts:71:27
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { BaseApi } from '../src/api/base-api';
   3 | import { BooksApi } from '../src/api/books-api';
   4 | import { Endpoint, Method } from '../src/constants/api-const';
   5 |
   6 | const endpoint = Endpoint.BOOKS;
   7 |
   8 | // test.describe(`Endpoint /${endpoint}`, () => {
   9 |
   10 | //   // GET all books
   11 | //   test.describe.only(`${Method.GET} all ${endpoint}`, () => {
   12 | //     let api: BaseApi;
   13 | //     let response;
   14 | //     let raw: string;
   15 | //     let data: any;
   16 |
   17 | //     test.beforeAll(async () => {
   18 |
   19 |     
   20 | //       api = new BaseApi();
   21 |     
   22 | //       await api.initContext();
   23 |
   24 |     
   25 | //       const config = api.buildRequestConfiguration(Method.GET, endpoint);
   26 | //       console.log('⚙️ Config:', config);
   27 |     
   28 | //       response = await api.sendRequest(config);
   29 | //       data = await response.json(); // 🔥 важно!
   30 | //       console.log('⚙️ response:', response,data);
   31 | //     });    
   32 |
   33 | //     test('has 200 response code', async () => {
   34 | //       expect(response.status()).toBe(200);
   35 | //     });
   36 |
   37 | //     test('has response data as a non-empty array', async () => {
   38 | //       expect(Array.isArray(data)).toBe(true);
   39 | //       expect(data.length).toBeGreaterThan(0);
   40 | //     });
   41 | //   });
   42 |
   43 |   // GET book by ID
   44 |   test.describe(`${Method.GET} ${endpoint} by ID`, () => {
   45 |     let api: BaseApi;
   46 |     let repository: BooksApi;
   47 |     let response;
   48 |     let existingBook;
   49 |
   50 |     test.beforeAll(async () => {
   51 |       api = new BaseApi();
   52 |       await api.initContext();
   53 |
   54 |       repository = new BooksApi();
   55 |       const books = repository.loadBooks();
   56 |       expect(books.length).toBeGreaterThan(0);
   57 |       existingBook = books[0];
   58 |
   59 |       const config = api.buildRequestConfiguration(Method.GET, endpoint, { id: existingBook.id });
   60 |       response = await api.sendRequest(config);
   61 |     });
   62 |
   63 |     test('has 200 response code', async () => {
   64 |       expect(response.status()).toBe(200);
   65 |     });
   66 |
   67 |     test('has all fields matching existing book', async () => {
   68 |       const data = await response.json();
   69 |       for (const key of Object.keys(existingBook)) {
   70 |         if (key === 'publishDate' || key==='description') continue; // После може да направя датата да се подава динамично в джейсъна
>  71 |         expect(data[key]).toBe(existingBook[key]);
      |                           ^ Error: expect(received).toBe(expected) // Object.is equality
   72 |       }
   73 |     });
   74 |   });
   75 |
   76 | //   // GET book by non-existing ID
   77 | //   test.describe(`${Method.GET} ${endpoint} by non-existing ID`, () => {
   78 | //     let api: BaseApi;
   79 | //     let response;
   80 |
   81 | //     test.beforeAll(async () => {
   82 | //       api = new BaseApi();
   83 | //       await api.initContext();
   84 |
   85 | //       const config = api.buildRequestConfiguration(Method.GET, endpoint, { id: -999 });
   86 | //       response = await api.sendRequest(config);
   87 | //     });
   88 |
   89 | //     test('has 404 response code', async () => {
   90 | //       expect(response.status()).toBe(404);
   91 | //     });
   92 | //   });
   93 |
   94 | //   // POST create new book
   95 | //   test.describe(`${Method.POST} ${endpoint}`, () => {
   96 | //     let api: BaseApi;
   97 | //     let repository: BooksApi;
   98 | //     let response;
   99 | //     let payload;
  100 | //     let data;
  101 |
  102 | //     test.beforeAll(async () => {
  103 | //       api = new BaseApi();
  104 | //       await api.initContext();
  105 |
  106 | //       repository = new BooksApi();
  107 | //       payload = repository.generateBookPayload();
  108 |
  109 | //       const config = api.buildRequestConfiguration(Method.POST, endpoint, { payload });
  110 | //       response = await api.sendRequest(config);
  111 | //       data = await response.json();
  112 | //     });
  113 |
  114 | //     test('has 200 response code', async () => {
  115 | //       expect(response.status()).toBe(200);
  116 | //     });
  117 |
  118 | //     test('has response data with valid id', async () => {
  119 | //       expect(data.id).toBeGreaterThan(0);
  120 | //     });
  121 |
  122 | //     test('has response data matching payload', async () => {
  123 | //       for (const key of Object.keys(payload)) {
  124 | //         expect(data[key]).toBe(payload[key]);
  125 | //       }
  126 | //     });
  127 | //   });
  128 |
  129 | //   // PUT update existing book
  130 | //   test.describe(`${Method.PUT} ${endpoint} by ID`, () => {
  131 | //     let api: BaseApi;
  132 | //     let repository: BooksApi;
  133 | //     let response;
  134 | //     let updatedPayload;
  135 |
  136 | //     test.beforeAll(async () => {
  137 | //       api = new BaseApi();
  138 | //       await api.initContext();
  139 |
  140 | //       repository = new BooksApi();
  141 | //       const existingBook = repository.loadBooks()[0];
  142 |
  143 | //       updatedPayload = repository.generateBookPayload({
  144 | //         id: existingBook.id,
  145 | //         title: 'Updated Title'
  146 | //       });
  147 |
  148 | //       const config = api.buildRequestConfiguration(Method.PUT, endpoint, {
  149 | //         id: existingBook.id,
  150 | //         payload: updatedPayload
  151 | //       });
  152 |
  153 | //       response = await api.sendRequest(config);
  154 | //     });
  155 |
  156 | //     test('has 200 response code', async () => {
  157 | //       expect(response.status()).toBe(200);
  158 | //     });
  159 |
  160 | //     test('has updated title in response', async () => {
  161 | //       const data = await response.json();
  162 | //       expect(data.title).toBe(updatedPayload.title);
  163 | //     });
  164 | //   });
  165 |
  166 | //   // DELETE book by ID
  167 | //   test.describe(`${Method.DELETE} ${endpoint} by ID`, () => {
  168 | //     let api: BaseApi;
  169 | //     let repository: BooksApi;
  170 | //     let response;
  171 | //     let createdBookId;
```